-- V4 基础药品与库存种子数据（将在所有租户库执行）
-- 使用 INSERT IGNORE 保证幂等，可重复运行不报错。
-- 如已存在同 medicine_id 记录则忽略。

-- 1. 药品基础数据（确保 category_id 已存在；若无可先插入分类）
INSERT IGNORE INTO medicine (
  medicine_id, generic_name, trade_name, spec, approval_no, category_id, manufacturer,
  retail_price, member_price, is_rx, unit, description, barcode, production_date, expiry_date,
  status, deleted
) VALUES
('MSEED001','维生素C片','维C片','100片/瓶','国药准字VC001',1,'健康制药',9.90,8.50,0,'瓶','补充维生素C','6900000000011','2025-01-01','2026-01-01','ACTIVE',0),
('MSEED002','板蓝根颗粒','板蓝根','20袋/盒','国药准字BLG01',1,'仁和制药',25.00,22.00,0,'盒','清热解毒','6900000000022','2025-02-15','2025-12-15','ACTIVE',0),
('MSEED003','复方感冒灵颗粒','感冒灵','10袋/盒','国药准字GML01',1,'白云山',28.50,25.00,0,'盒','缓解感冒症状','6900000000033','2025-03-01','2025-08-01','ACTIVE',0),
('MSEED004','阿莫西林胶囊','阿莫西林','24粒/盒','国药准字AMX01',2,'哈药集团',18.00,15.00,0,'盒','抗菌消炎','6900000000044','2025-01-20','2025-09-20','ACTIVE',0),
('MSEED005','布洛芬片','布洛芬','12片/板','国药准字BLF01',2,'拜耳',12.80,10.50,0,'板','镇痛退热','6900000000055','2025-03-10','2025-11-10','ACTIVE',0),
('MSEED006','葡萄糖注射液','葡萄糖','500ml/瓶','国药准字PTT01',3,'国药集团',6.50,6.00,0,'瓶','补充能量','6900000000066','2025-01-05','2025-07-05','ACTIVE',0),
('MSEED007','维生素B族片','维B片','60片/瓶','国药准字VB001',4,'健康制药',19.90,17.50,0,'瓶','补充维生素B族','6900000000077','2025-02-01','2026-02-01','ACTIVE',0),
('MSEED008','参苓白术散','参苓散','6袋/盒','国药准字CLB01',5,'同仁堂',36.00,32.00,0,'盒','益气健脾','6900000000088','2025-02-12','2026-02-12','ACTIVE',0),
('MSEED009','鱼油软胶囊','鱼油','120粒/瓶','国食健字YUY01',6,'汤臣倍健',89.00,79.00,0,'瓶','保健调脂','6900000000099','2025-01-25','2026-01-25','ACTIVE',0),
('MSEED010','钙片','钙片','100片/瓶','国食健字GAI01',6,'善存',65.00,58.00,0,'瓶','补钙营养','6900000000105','2025-02-20','2026-02-20','ACTIVE',0);

-- 2. 库存批次（expire_date 用于前端效期与库存状态测试）
INSERT IGNORE INTO inventory (
  medicine_id, batch_no, expire_date, stock_quantity, min_threshold, purchase_price
) VALUES
('MSEED001','BATCH-VC-202501','2026-01-01',120,30,5.50),
('MSEED002','BATCH-BLG-202502','2025-12-15',45,20,15.00),
('MSEED003','BATCH-GML-202503','2025-08-01',0,15,18.00),          -- 缺货测试
('MSEED004','BATCH-AMX-202501','2025-09-20',80,25,10.00),
('MSEED005','BATCH-BLF-202503','2025-11-10',16,20,7.50),          -- 低库存测试 (16 < 20)
('MSEED006','BATCH-PTT-202501','2025-07-05',200,50,3.20),
('MSEED007','BATCH-VB-202502','2026-02-01',60,20,11.00),
('MSEED008','BATCH-CLB-202502','2026-02-12',25,30,24.00),         -- 低库存测试 (25 < 30)
('MSEED009','BATCH-YUY-202501','2026-01-25',140,40,50.00),
('MSEED010','BATCH-GAI-202502','2026-02-20',95,35,30.00);

-- 3. 可选验证（手动执行，不在迁移内）
-- SELECT m.medicine_id,m.generic_name,i.stock_quantity,i.expire_date FROM medicine m LEFT JOIN inventory i ON m.medicine_id=i.medicine_id;

