<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>智慧药房收银系统 - 销售统计</title>
  <link rel="stylesheet" href="css/tailwind.css" />
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/theme-enhanced.css" />
  <link rel="stylesheet" href="css/theme-premium.css" />
  <link rel="stylesheet" href="css/theme-lightwide.css" />
  <link rel="stylesheet" href="css/ui-enhanced.css" />
  <link rel="icon" type="image/svg+xml" href="favicon.svg">
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>(function(){if(!window.tailwind){window.tailwind={config:{}};} if(!window.tailwind.config){window.tailwind.config={};}})();</script>
  <style>
    /* 统一主内容滚动样式 */
    .main-content{flex:1 1 auto;padding:1.5rem;min-height:calc(100vh - 64px);overflow-y:auto;scrollbar-width:thin;}
    .main-content::-webkit-scrollbar{width:8px}
    .main-content::-webkit-scrollbar-track{background:#f5f5f5;border-radius:4px}
    .main-content::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:4px}
    .main-content::-webkit-scrollbar-thumb:hover{background:#9ca3af}
  </style>
  <script src="js/common.js" defer></script>
  <script src="js/common-nav.js" defer></script>
</head>
<body class="font-inter text-gray-800 min-h-screen flex enhanced-ui theme-modern theme-lightwide page-enter">
<a href="#main-content" class="skip-link">跳到主内容</a>
<div class="scroll-progress" id="scroll-progress"></div>
<div id="common-nav" data-active="sales"></div>
<div id="notification-panel" class="hidden absolute top-20 right-6 bg-white shadow-lg rounded-lg p-4 w-64 text-sm">
  <div class="font-medium mb-2">通知面板</div>
  <p class="text-gray-500">暂无通知</p>
</div>
<main class="flex-1 flex flex-col pt-16">
  <div class="main-content" id="main-content"><div class="container-fluid section-gap"><div class="app-shell">
    <div class="flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4 action-bar">
      <div>
        <h2 class="page-title font-bold page-title-decor heading-accent">销售统计</h2>
        <p class="text-gray-500">销售记录与趋势分析</p>
      </div>
      <!-- ...existing code... -->
    </div>
    <div class="dashboard-kpis kpi-horizontal mb-6" id="sales-kpi-row">
      <div class="card p-4 card-interactive"><p class="text-xs text-gray-500 mb-1">今日销售额</p><h3 class="text-xl font-bold" id="sales-kpi-today">--</h3></div>
      <div class="card p-4 card-interactive"><p class="text-xs text-gray-500 mb-1">今日订单数</p><h3 class="text-xl font-bold" id="sales-kpi-order-count">--</h3></div>
      <div class="card p-4 card-interactive"><p class="text-xs text-gray-500 mb-1">会员销售占比</p><h3 class="text-xl font-bold" id="sales-kpi-member-rate">--</h3></div>
      <div class="card p-4 card-interactive"><p class="text-xs text-gray-500 mb-1">平均客单价</p><h3 class="text-xl font-bold" id="sales-kpi-avg-ticket">--</h3></div>
      <div class="card p-4 card-interactive"><p class="text-xs text-gray-500 mb-1">退款订单</p><h3 class="text-xl font-bold" id="sales-kpi-refund-count">--</h3></div>
    </div>
    <!-- ...existing code... -->
  </div></div></div> <!-- close app-shell / container-fluid / main-content wrappers -->
</main>
<script>
  (function(){
    const bar=document.getElementById('scroll-progress');
    function update(){const h=document.documentElement.scrollHeight - window.innerHeight;const sc=window.scrollY;bar&&(bar.style.width=(h>0?(sc/h)*100:0)+'%');}
    window.addEventListener('scroll',update,{passive:true});update();
    if(!document.getElementById('theme-toggle')){const btn=document.createElement('button');btn.id='theme-toggle';btn.className='theme-toggle';btn.innerHTML='<i class="fa fa-moon-o"></i>';btn.onclick=()=>{const dark=document.documentElement.classList.toggle('dark');btn.innerHTML='<i class="fa '+(dark?'fa-sun-o':'fa-moon-o')+'"></i>';};document.body.appendChild(btn);} })();
</script>
<script>
(function(){var nav=document.getElementById('common-nav');if(nav&&!nav.classList.contains('nav-glass')){nav.classList.add('nav-glass');}})();
</script>
<script src="js/a11y.js" defer></script>
<script src="js/kpi.js"></script>
<script>
(function(){ if(window.__salesKpiUnified) return; window.__salesKpiUnified=true; document.addEventListener('DOMContentLoaded',()=>{ KPI.fetchOrdersAndUpdate({limit:500}); }); })();
</script>
</body>
</html>
