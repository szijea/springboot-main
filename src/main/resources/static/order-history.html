<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>智慧药房收银系统 - 历史订单</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script src="js/common.js"></script>

    <!-- 配置Tailwind -->
    <script>
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                primary: '#165DFF',
                secondary: '#36B37E',
                accent: '#FF5630',
              },
              fontFamily: {
                inter: ['Inter', 'system-ui', 'sans-serif'],
              },
            },
          }
        }
    </script>

    <style type="text/tailwindcss">
        @layer utilities {
          .sidebar-item {
            @apply flex items-center gap-3 px-4 py-3 rounded-lg transition-all duration-200 cursor-pointer;
          }
          .sidebar-item.active {
            @apply bg-primary text-white;
          }
          .sidebar-item:not(.active):hover {
            @apply bg-gray-100;
          }
          .card {
            @apply bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden transition-all duration-300 hover:shadow-md;
          }
          .btn {
            @apply px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center gap-2;
          }
          .btn-primary {
            @apply bg-primary text-white hover:bg-primary/90;
          }
          .btn-outline {
            @apply border border-gray-300 hover:bg-gray-50;
          }
          .input {
            @apply w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none transition-all;
          }
          .badge {
            @apply px-2 py-1 rounded-full text-xs font-medium;
          }

          /* 滚动条样式 */
          .main-content {
            @apply flex-1 p-6 bg-gray-50;
            height: calc(100vh - 64px);
            overflow-y: scroll;
            scrollbar-width: thin;
          }
          .main-content::-webkit-scrollbar {
            width: 8px;
          }
          .main-content::-webkit-scrollbar-track {
            background: #f5f5f5;
            border-radius: 4px;
          }
          .main-content::-webkit-scrollbar-thumb {
            background: #d1d5db;
            border-radius: 4px;
          }
        }
    </style>
</head>

<body class="font-inter bg-gray-50 text-gray-800 min-h-screen flex">
<!-- 侧边栏（与其他页面一致） -->
<aside class="w-64 bg-white border-r border-gray-200 flex-shrink-0 flex flex-col h-screen z-10">
    <div class="p-4 border-b border-gray-200">
        <div class="flex items-center gap-3">
            <div class="w-10 h-10 bg-primary/10 rounded-lg flex items-center justify-center">
                <i class="fa fa-medkit text-primary"></i>
            </div>
            <h1 class="font-bold text-lg">智慧药房系统</h1>
        </div>
    </div>

    <div class="flex-1 overflow-y-auto py-4 px-3">
        <nav class="space-y-1">
            <p class="text-xs font-medium text-gray-500 px-4 mb-2">主功能</p>
            <a href="medicine-management.html" class="sidebar-item block">
                <i class="fa fa-dashboard w-5 text-center"></i>
                <span>控制台</span>
            </a>
            <a href="cashier.html" class="sidebar-item block">
                <i class="fa fa-shopping-cart w-5 text-center"></i>
                <span>收银管理</span>
            </a>
            <a href="order-history.html" class="sidebar-item active block">
                <i class="fa fa-history w-5 text-center"></i>
                <span>历史订单</span>
            </a>
            <a href="stock-in.html" class="sidebar-item block">
                <i class="fa fa-box w-5 text-center"></i>
                <span>药品入库</span>
            </a>
            <a href="inventory.html" class="sidebar-item block">
                <i class="fa fa-warehouse w-5 text-center"></i>
                <span>库存管理</span>
            </a>
            <a href="members.html" class="sidebar-item block">
                <i class="fa fa-users w-5 text-center"></i>
                <span>会员管理</span>
            </a>
        </nav>
    </div>

    <div class="p-4 border-t border-gray-200">
        <div class="flex items-center gap-3">
            <img src="https://picsum.photos/200/200?random=1" alt="用户头像" class="w-10 h-10 rounded-full object-cover">
            <div>
                <p class="font-medium text-sm">张药师</p>
                <p class="text-xs text-gray-500">管理员</p>
            </div>
            <a href="login.html" class="ml-auto text-gray-400 hover:text-accent transition-colors">
                <i class="fa fa-sign-out"></i>
            </a>
        </div>
    </div>
</aside>

<!-- 主内容区 -->
<main class="flex-1 flex flex-col">
    <!-- 顶部导航 -->
    <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6">
        <div class="flex items-center gap-4">
            <button id="sidebar-toggle" class="lg:hidden text-gray-500 hover:text-primary">
                <i class="fa fa-bars text-xl"></i>
            </button>
            <div class="relative">
                <input type="text" placeholder="搜索订单号、会员..." class="w-64 px-3 py-2 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary/30 focus:border-primary outline-none transition-all">
                <i class="fa fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
            </div>
        </div>

        <div class="flex items-center gap-4">
            <button class="relative p-2 text-gray-500 hover:text-primary hover:bg-gray-100 rounded-full transition-colors">
                <i class="fa fa-bell text-xl"></i>
                <span class="absolute top-1 right-1 w-2 h-2 bg-accent rounded-full"></span>
            </button>

            <div class="text-right hidden md:block">
                <p class="text-sm font-medium">今天 <span id="current-date"></span></p>
                <p class="text-xs text-gray-500" id="current-time"></p>
            </div>
        </div>
    </header>

    <!-- 可滚动内容区 -->
    <div class="main-content">
        <div class="flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4">
            <div>
                <h2 class="text-[clamp(1.25rem,2vw,1.75rem)] font-bold">历史订单</h2>
                <p class="text-gray-500">查看所有已完成订单记录</p>
            </div>
            <div class="flex gap-3">
                <button class="btn btn-outline" id="export-orders-btn">
                    <i class="fa fa-download"></i> 导出订单
                </button>
                <button class="btn btn-primary" id="refresh-orders-btn">
                    <i class="fa fa-refresh"></i> 刷新数据
                </button>
            </div>
        </div>

        <!-- 订单筛选 -->
        <div class="card p-6 mb-6">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">订单日期</label>
                    <input type="date" class="input" id="order-date-filter">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">订单状态</label>
                    <select class="input" id="order-status-filter">
                        <option value="">全部状态</option>
                        <option value="paid">已支付</option>
                        <option value="refunded">已退款</option>
                        <option value="pending">待支付</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">支付方式</label>
                    <select class="input" id="payment-type-filter">
                        <option value="">全部方式</option>
                        <option value="cash">现金</option>
                        <option value="wechat">微信</option>
                        <option value="alipay">支付宝</option>
                        <option value="insurance">医保</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-1">会员信息</label>
                    <input type="text" class="input" placeholder="会员姓名或手机号" id="member-filter">
                </div>
            </div>
            <div class="flex justify-end gap-3 mt-4">
                <button class="btn btn-outline" id="reset-filters-btn">重置</button>
                <button class="btn btn-primary" id="apply-filters-btn">查询</button>
            </div>
        </div>

        <!-- 订单列表 -->
        <div class="card">
            <div class="p-6 border-b border-gray-100">
                <div class="flex justify-between items-center">
                    <h3 class="font-bold">订单列表</h3>
                    <div class="text-sm text-gray-500" id="orders-count">共 0 条订单</div>
                </div>
            </div>

            <div class="overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200">
                    <thead class="bg-gray-50">
                    <tr>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">订单信息</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">会员信息</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">支付信息</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">订单金额</th>
                        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
                    </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200" id="orders-list-body">
                    <!-- 订单数据将通过JavaScript动态加载 -->
                    </tbody>
                </table>
            </div>

            <!-- 加载状态 -->
            <div id="loading-orders" class="hidden text-center py-8">
                <i class="fa fa-spinner fa-spin text-2xl text-primary mb-2"></i>
                <p class="text-gray-500">加载中...</p>
            </div>

            <!-- 空状态 -->
            <div id="empty-orders" class="hidden text-center py-12">
                <i class="fa fa-file-text-o text-4xl text-gray-300 mb-3"></i>
                <p class="text-gray-500">暂无订单数据</p>
                <p class="text-sm text-gray-400 mt-1">请尝试其他筛选条件</p>
            </div>

            <div class="p-4 border-t border-gray-100 flex justify-between items-center">
                <div class="text-sm text-gray-500" id="orders-pagination-info">显示 0-0 条，共 0 条</div>
                <div class="flex gap-1" id="orders-pagination-controls">
                    <!-- 分页控件将通过JavaScript动态生成 -->
                </div>
            </div>
        </div>
    </div>
</main>

<!-- 订单详情模态框 -->
<div id="order-detail-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl p-6 w-full max-w-4xl max-h-[90vh] overflow-y-auto">
        <h3 class="font-bold text-lg mb-4">订单详情</h3>
        <div id="order-detail-content">
            <!-- 订单详情内容将通过JavaScript动态加载 -->
        </div>
        <div class="flex justify-end gap-3 mt-6">
            <button class="btn btn-outline" id="close-order-detail">关闭</button>
            <button class="btn btn-primary" id="print-order-btn">
                <i class="fa fa-print"></i> 打印订单
            </button>
        </div>
    </div>
</div>
<script>
    // 全局变量
    let currentOrdersPage = 1;
    const ordersPageSize = 10;
    let totalOrders = 0;

    // 初始化
    document.addEventListener('DOMContentLoaded', function() {
        initDateTime();
        initSidebar();
        initOrderEvents();
        loadOrders();
    });

    // 日期时间初始化
    function initDateTime() {
        const update = () => {
            const now = new Date();
            document.getElementById('current-date').textContent = now.toLocaleDateString('zh-CN', {month:'long', day:'numeric', weekday:'long'});
            document.getElementById('current-time').textContent = now.toLocaleTimeString('zh-CN');
        };
        update();
        setInterval(update, 1000);
    }

    // 侧边栏切换
    function initSidebar() {
        document.getElementById('sidebar-toggle')?.addEventListener('click', () => {
            const sidebar = document.querySelector('aside');
            sidebar.classList.toggle('w-64');
            sidebar.classList.toggle('w-0');
            sidebar.classList.toggle('hidden');
        });
    }

    // 订单相关事件初始化
    function initOrderEvents() {
        // 刷新订单
        document.getElementById('refresh-orders-btn').addEventListener('click', loadOrders);

        // 筛选应用
        document.getElementById('apply-filters-btn').addEventListener('click', loadOrders);

        // 重置筛选
        document.getElementById('reset-filters-btn').addEventListener('click', function() {
            document.getElementById('order-date-filter').value = '';
            document.getElementById('order-status-filter').value = '';
            document.getElementById('payment-type-filter').value = '';
            document.getElementById('member-filter').value = '';
            loadOrders();
        });

        // 关闭订单详情模态框
        document.getElementById('close-order-detail').addEventListener('click', function() {
            document.getElementById('order-detail-modal').classList.add('hidden');
        });

        // 导出订单
        document.getElementById('export-orders-btn').addEventListener('click', exportOrders);
    }

    // 加载订单数据
    async function loadOrders() {
        console.log('=== 开始加载订单数据 ===');
        showOrdersLoading();

        try {
            const filters = getOrderFilters();
            console.log('查询参数:', filters);
            console.log('页码:', currentOrdersPage, '每页大小:', ordersPageSize);

            // 直接调用API
            const response = await fetch(`http://localhost:8080/api/orders?page=${currentOrdersPage - 1}&size=${ordersPageSize}`);

            console.log('API响应状态:', response.status);

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const result = await response.json();
            console.log('完整的API响应:', result);

            if (result && result.code === 200) {
                console.log('订单数据:', result.data);
                console.log('订单总数:', result.total);

                displayOrders(result.data);
                updateOrdersPagination(result.total || 0);
            } else {
                console.log('API返回错误:', result.message);
                showOrdersEmpty();
            }
        } catch (error) {
            console.error('加载订单失败:', error);
            showOrdersEmpty();
            showMessage('加载订单失败: ' + error.message, 'error');
        }
    }

    // 获取订单筛选条件
    function getOrderFilters() {
        return {
            date: document.getElementById('order-date-filter').value,
            status: document.getElementById('order-status-filter').value,
            paymentType: document.getElementById('payment-type-filter').value,
            member: document.getElementById('member-filter').value
        };
    }

    // 显示订单加载状态
    function showOrdersLoading() {
        document.getElementById('orders-list-body').classList.add('hidden');
        document.getElementById('loading-orders').classList.remove('hidden');
        document.getElementById('empty-orders').classList.add('hidden');
    }

    // 显示订单空状态
    function showOrdersEmpty() {
        document.getElementById('orders-list-body').classList.add('hidden');
        document.getElementById('loading-orders').classList.add('hidden');
        document.getElementById('empty-orders').classList.remove('hidden');
    }

    // 显示订单数据
    function displayOrders(orders) {
        const tbody = document.getElementById('orders-list-body');

        console.log('要显示的订单数据:', orders);

        if (!orders || orders.length === 0) {
            console.log('没有订单数据，显示空状态');
            showOrdersEmpty();
            return;
        }

        document.getElementById('loading-orders').classList.add('hidden');
        document.getElementById('empty-orders').classList.add('hidden');
        tbody.classList.remove('hidden');

        const html = orders.map(order => {
            console.log('处理订单:', order);

            return `
                <tr class="hover:bg-gray-50 transition-colors">
                    <td class="px-6 py-4">
                        <div>
                            <div class="text-sm font-medium">${order.orderId || '未知订单'}</div>
                            <div class="text-xs text-gray-500">${order.orderTime ? formatDateTime(order.orderTime) : '未知时间'}</div>
                            <div class="text-xs text-gray-500">收银员: ${order.cashierId || '未知'}</div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        ${order.customerName ? `
                            <div class="text-sm font-medium">${order.customerName}</div>
                            <div class="text-xs text-gray-500">${order.memberId ? '会员' : '非会员'}</div>
                        ` : '<div class="text-sm text-gray-500">匿名客户</div>'}
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm">${getPaymentTypeText(order.paymentType)}</div>
                        <div class="text-xs text-gray-500">${getPaymentStatusText(order.paymentStatus)}</div>
                        ${order.payTime ? `<div class="text-xs text-gray-500">${formatDateTime(order.payTime)}</div>` : ''}
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm font-medium">${formatPrice(order.actualPayment || order.totalAmount || 0)}</div>
                        ${order.discountAmount > 0 ? `<div class="text-xs text-secondary">优惠: -${formatPrice(order.discountAmount)}</div>` : ''}
                    </td>
                    <td class="px-6 py-4">
                        <button class="btn btn-outline text-sm px-3 py-1 view-order-detail" data-order-id="${order.orderId}">
                            <i class="fa fa-eye"></i> 查看详情
                        </button>
                    </td>
                </tr>
            `;
        }).join('');

        tbody.innerHTML = html;

        // 重新绑定查看详情事件
        document.querySelectorAll('.view-order-detail').forEach(btn => {
            btn.addEventListener('click', function() {
                const orderId = this.getAttribute('data-order-id');
                showOrderDetail(orderId);
            });
        });
    }

    // 更新订单分页信息
    function updateOrdersPagination(total) {
        totalOrders = total;
        const totalPages = Math.ceil(total / ordersPageSize);

        document.getElementById('orders-count').textContent = `共 ${total} 条订单`;
        document.getElementById('orders-pagination-info').textContent =
            `显示 ${((currentOrdersPage - 1) * ordersPageSize) + 1}-${Math.min(currentOrdersPage * ordersPageSize, total)} 条，共 ${total} 条`;

        updateOrdersPaginationControls(totalPages);
    }

    // 更新订单分页控件
    function updateOrdersPaginationControls(totalPages) {
        const container = document.getElementById('orders-pagination-controls');

        if (totalPages <= 1) {
            container.innerHTML = '';
            return;
        }

        let html = '';

        // 上一页
        html += `
            <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-300 hover:bg-gray-50 ${currentOrdersPage === 1 ? 'opacity-50 cursor-not-allowed' : ''}"
                    ${currentOrdersPage === 1 ? 'disabled' : ''} onclick="changeOrdersPage(${currentOrdersPage - 1})">
                <i class="fa fa-chevron-left text-xs"></i>
            </button>
        `;

        // 页码
        for (let i = 1; i <= totalPages; i++) {
            if (i === currentOrdersPage) {
                html += `<button class="w-8 h-8 flex items-center justify-center rounded border border-primary bg-primary text-white">${i}</button>`;
            } else {
                html += `<button class="w-8 h-8 flex items-center justify-center rounded border border-gray-300 hover:bg-gray-50" onclick="changeOrdersPage(${i})">${i}</button>`;
            }
        }

        // 下一页
        html += `
            <button class="w-8 h-8 flex items-center justify-center rounded border border-gray-300 hover:bg-gray-50 ${currentOrdersPage === totalPages ? 'opacity-50 cursor-not-allowed' : ''}"
                    ${currentOrdersPage === totalPages ? 'disabled' : ''} onclick="changeOrdersPage(${currentOrdersPage + 1})">
                <i class="fa fa-chevron-right text-xs"></i>
            </button>
        `;

        container.innerHTML = html;
    }

    // 切换订单页面
    function changeOrdersPage(page) {
        if (page < 1 || page > Math.ceil(totalOrders / ordersPageSize)) return;
        currentOrdersPage = page;
        loadOrders();
    }

    // 显示订单详情
    async function showOrderDetail(orderId) {
        try {
            const response = await fetch(`http://localhost:8080/api/orders/${orderId}`);
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            const result = await response.json();

            if (result && result.code === 200) {
                displayOrderDetail(result.data);
                document.getElementById('order-detail-modal').classList.remove('hidden');
            } else {
                throw new Error(result.message || '获取订单详情失败');
            }
        } catch (error) {
            console.error('获取订单详情失败:', error);
            showMessage('获取订单详情失败: ' + error.message, 'error');
        }
    }

    // 显示订单详情内容
    function displayOrderDetail(order) {
        const container = document.getElementById('order-detail-content');

        const html = `
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <div>
                    <h4 class="font-medium mb-2">订单基本信息</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-500">订单号:</span>
                            <span>${order.orderId}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">下单时间:</span>
                            <span>${formatDateTime(order.orderTime)}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">支付时间:</span>
                            <span>${order.payTime ? formatDateTime(order.payTime) : '未支付'}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">收银员:</span>
                            <span>${order.cashierId || '未知'}</span>
                        </div>
                    </div>
                </div>

                <div>
                    <h4 class="font-medium mb-2">支付信息</h4>
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-500">支付方式:</span>
                            <span>${getPaymentTypeText(order.paymentType)}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">支付状态:</span>
                            <span class="${getPaymentStatusClass(order.paymentStatus)}">${getPaymentStatusText(order.paymentStatus)}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">订单总额:</span>
                            <span>${formatPrice(order.totalAmount)}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">优惠金额:</span>
                            <span class="text-secondary">-${formatPrice(order.discountAmount)}</span>
                        </div>
                        <div class="flex justify-between font-medium border-t pt-2">
                            <span>实付金额:</span>
                            <span class="text-primary">${formatPrice(order.actualPayment)}</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="mb-6">
                <h4 class="font-medium mb-2">会员信息</h4>
                ${order.memberId ? `
                    <div class="space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span class="text-gray-500">会员ID:</span>
                            <span>${order.memberId}</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">使用积分:</span>
                            <span>${order.usedPoints || 0} 积分</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">获得积分:</span>
                            <span>${order.createdPoints || 0} 积分</span>
                        </div>
                    </div>
                ` : '<div class="text-sm text-gray-500">非会员订单</div>'}
            </div>

            <div>
                <h4 class="font-medium mb-2">订单商品</h4>
                <div class="text-sm text-gray-500">
                    商品详情功能需要后端支持，请联系开发人员添加订单项查询接口。
                </div>
            </div>
        `;

        container.innerHTML = html;
    }

    // 导出订单
    async function exportOrders() {
        try {
            const btn = document.getElementById('export-orders-btn');
            btn.innerHTML = '<i class="fa fa-spinner fa-spin"></i> 导出中...';
            btn.disabled = true;

            // 这里需要实现导出逻辑
            await new Promise(resolve => setTimeout(resolve, 1000)); // 模拟导出过程

            showMessage('订单导出成功');
        } catch (error) {
            console.error('导出订单失败:', error);
            showMessage('导出订单失败', 'error');
        } finally {
            btn.innerHTML = '<i class="fa fa-download"></i> 导出订单';
            btn.disabled = false;
        }
    }

    // 工具函数
    function getPaymentTypeText(type) {
        const types = {
            1: '现金', 2: '微信', 3: '支付宝', 4: '医保'
        };
        return types[type] || '未知';
    }

    function getPaymentStatusText(status) {
        const statuses = {
            0: '待支付', 1: '已支付', 2: '已退款'
        };
        return statuses[status] || '未知';
    }

    function getPaymentStatusClass(status) {
        const classes = {
            0: 'text-yellow-600',
            1: 'text-green-600',
            2: 'text-gray-600'
        };
        return classes[status] || 'text-gray-600';
    }

    function formatPrice(price) {
        if (!price && price !== 0) return '¥0.00';
        return '¥' + parseFloat(price).toFixed(2);
    }

    function formatDateTime(date) {
        if (!date) return '';
        return new Date(date).toLocaleString('zh-CN');
    }

    function showMessage(message, type = 'success') {
        const messageDiv = document.createElement('div');
        messageDiv.className = `fixed top-4 right-4 px-4 py-2 rounded-lg shadow-lg z-50 ${
            type === 'success' ? 'bg-green-500 text-white' : 'bg-red-500 text-white'
        }`;
        messageDiv.innerHTML = `
            <i class="fa ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-triangle'} mr-2"></i>
            ${message}
        `;
        document.body.appendChild(messageDiv);
        setTimeout(() => messageDiv.remove(), 3000);
    }
</script>
</body>
</html>